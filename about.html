<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8">
    <title>Fermi LAT Light Curve Repository</title>

    <!-- jQuery -->
    <script type="text/javascript" charset="UTF-8" src="./js/jquery-1.12.0.min.js"></script>

    <!-- Bootstrap compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <!-- Chart.js -->
    <script type="text/javascript" charset="UTF-8" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>

    <!-- Bootstrap compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Bootstrap Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <!-- Reset css -->
    <link rel="stylesheet" hrmouseef="./css/reset.css" type="text/css" />

    <!-- NASA theme -->
    <link rel="stylesheet" href="./css/NASA.css">
    
</head>


<!-- custom css -->
<style type="text/css">

    p {  
      text-indent: 2.0em;  
    }  
</style>

<script>

    var data_4FGL;
    var classifications_4FGL;
    var classifications_LRC
    var colors = ['#0d47a1','#007E33', '#FF8800','#CC0000','#9933CC','#0d47a1','#00C851','#ffbb33','#ff4444','#aa66cc','#00695c','#2BBBAD','#3F729B']

    function countSourceTypes() {

        classifications_4FGL = {}
        classifications_LCR = {}

        console.log(data_4FGL.length)
        for (var i=0, size=data_4FGL.length; i<size; i++) {

            var key = data_4FGL[i].CLASS1
            var variability_index = parseFloat(data_4FGL[i].Variability_Index)

            // Convert all of the classification to upper case
            key = key.toUpperCase();

            if (key.length === 0) {
                key = 'Unknown'
            }

            if (key in classifications_4FGL) {
                classifications_4FGL[key] = classifications_4FGL[key] + 1
            } else {
                classifications_4FGL[key] = 1
            }

            if (variability_index >= 18.49) {

                if (key in classifications_LCR) {
                    classifications_LCR[key] = classifications_LCR[key] + 1
                } else {
                    classifications_LCR[key] = 1
                }
            }

        }


        console.log(classifications_4FGL)
        console.log(classifications_LCR)


    }

    function get4FGLData() {

        console.log('Querying the 4FGL database...')

        // Setup the URL
        URL = "queryDB.php?typeOfRequest=SourceList&catalog=4FGL&magicWord=130427A"; 

        // Print out the final URL
        console.log(URL);

        // Perform an ajax request
        $.ajax({url: URL, success: function(responseText){

            // Get the data
            try {
                data_4FGL = JSON.parse(responseText);
                console.log("4FGL data length = " + data_4FGL.length)
            } catch (error) {
                console.log('Error parsing query response.')
                $('#main').hide()
                return;
            }

            if (data_4FGL.length === 0) {
                alert('Your search found no results!')
                
            } else {

                console.log(data_4FGL)

            }

            countSourceTypes()

            fillDoughnutPlots()


        }});
    }

    function fillDoughnutPlots() {


        try {
            window.myDoughnut1.destroy();
        } catch(err) {
            //
        }

        // Create random data
        var randomScalingFactor = function() {
            return Math.round(Math.random() * 100);
        };

        // Configure the detector distribution plot
        var config1 = {
            type: 'doughnut',
            data: {
                datasets: [{
                    data: Object.values(classifications_4FGL),
                    // data: classificationOccurance,
                    backgroundColor: colors,
                    label: 'Dataset 1'
                }],

                labels: Object.keys(classifications_4FGL)
                // labels: classificationsUnique
            },
            options: {
                responsive: true,
                legend: {
                    display: true,
                    position: 'bottom',                                 
                    labels: { 
                        fontSize: 12,
                        boxWidth: 10,
                        usePointStyle: false,
                        fullWidth: false,
                        fontFamily: 'Helvetica Neue',
                        fontColor: '#333333'
                    }
                },
                title: {
                    display: true,
                    text: '4FGL Classification Distribution',
                    fontFamily: 'Helvetica Neue',
                    fontColor: '#333333',
                    fontSize: 14

                },
                animation: {
                    animateScale: true,
                    animateRotate: true
                },
                layout: {
                    padding: {
                        top: 0
                    }
                }
            }
        };

        var config2 = {
            type: 'doughnut',
            data: {
                datasets: [{
                    data: Object.values(classifications_LCR),
                    // data: classificationOccurance,
                    backgroundColor: colors,
                    label: 'Dataset 1'
                }],

                labels: Object.keys(classifications_LCR)
            },
            options: {
                responsive: true,
                legend: {
                    display: true,
                    position: 'bottom',                                 
                    labels: { 
                        fontSize: 12,
                        boxWidth: 10,
                        usePointStyle: false,
                        fullWidth: false,
                        fontFamily: 'Helvetica Neue',
                        fontColor: '#333333'
                    }
                },
                title: {
                    display: true,
                    text: 'LCR Classification Distribution',
                    fontFamily: 'Helvetica Neue',
                    fontColor: '#333333',
                    fontSize: 14

                },
                animation: {
                    animateScale: true,
                    animateRotate: true
                },
                layout: {
                    padding: {
                        top: 0
                    }
                }
            }
        };


        // Create the detector distribution plot
        var ctx1 = document.getElementById('chart-area_1').getContext('2d');
        window.myDoughnut1 = new Chart(ctx1, config1);

        var ctx2 = document.getElementById('chart-area_2').getContext('2d');
        window.myDoughnut2 = new Chart(ctx2, config2);
    }

    // Query the database when the page is finished loading
    $(function() {

        get4FGLData()
        // countSourceTypes()
        // Fill the doughnut plot
        // fillDoughnutPlots();

    })


</script>

<body>


    <!-- main starts here -->       
    <div id="main" style="width:2000px;">    

        <!-- Start NASA Container -->
        <div id="nasa-container" style="margin:8px 0 0 10px">

            <!-- Start NASA Banner -->
            <div id="nasa-banner-plain">

                <!-- Left - Logo -->
                <div class="nasa-logo">
                    <a href="http://www.nasa.gov/"><img src="http://fermi.gsfc.nasa.gov/ssc/inc/img/nasa_logo.gif" width="140" height="98" border="0" alt="NASA Logo"></a>
                </div>
            
                <!-- Middle - Affiliations -->
                <div id="nasa-affiliation">
                    <h1><a href="http://www.nasa.gov/">National Aeronautics and Space Administration</a></h1>
                    <h2><a href="http://www.nasa.gov/goddard">Goddard Space Flight Center</a></h2>
                </div>
                
                <!-- Right - Search and Links -->
                <div id="nasa-search-links">
                    <div id="header-links">
                        <a href="/ssc/">FSSC</a> &bull; <a href="http://heasarc.gsfc.nasa.gov/">HEASARC</a> &bull; <a href="http://science.gsfc.nasa.gov/">Sciences and Exploration</a>
                    </div>
                </div>

            <!-- End NASA Banner -->
            </div>

        <!-- End NASA Container -->
        </div>

        <!-- LCR header starts here -->
        <div style="margin-left:0px">
            <div style="float: left; padding-top:12px; padding-left:25px"><img middle; style="width: 100%; height: 100%" src="./img/Fermi_Small.png"></div>
            <div style="margin-left: 25px;padding-left: 75px; padding-bottom:20px; padding-top: 5px">
                <H2>Fermi LAT Light Curve Repository (LCR)</H2>
            </div>
        </div>
        <!-- LCR header ends here -->

        <!-- sidebar start here -->
        <div class="col-xs-2" style="width:330px; margin-left:10px;">

                <!-- Related resources start here -->      
                <div class="panel panel-default" style="height: 188px;">
                    <div class="panel-heading">
                        <h3 class="panel-title">Light Curve Repository Links</h3>
                     </div>
                        <center>
                            <table class="table table-striped">
                            <!-- <table class="table"> -->
                              <tbody>         
                                    <tr><td><a href="index.html">The Light Curve Repository Sky Map</a></td></tr>      
                                    <tr><td><a href="about.html" target="_blank">The Light Curve Repository Usage Notes</a></td></tr>      
                                    <tr><td><a href="table_description.html" target="_blank" onclick="window.open(this.href,'targetWindow','width=800px, height=1175px'); return false;"> The Light Curve Repository Data Description</a></td></tr>
                                    <tr><td><a href="FAQ.html" target="_blank">The Light Curve Repository FAQ</a></td></tr>
                              </tbody>
                            </table>  
                        </center>
                </div>
                <!-- Related resources ends here -->   

                <!-- Related resources start here -->      
                <div class="panel panel-default" style="height: 188px;">
                    <div class="panel-heading">
                        <h3 class="panel-title">Additional Information</h3>
                     </div>
                        <center>
                            <table class="table table-striped">
                            <!-- <table class="table"> -->
                              <tbody>           
                                    <tr><td><a href="https://fermi.gsfc.nasa.gov/ssc/">The Fermi Science Support Center</a></td></tr>
                                    <tr><td><a href="https://fermi.gsfc.nasa.gov/ssc/data/analysis/documentation/Cicerone/">Fermi LAT & GBM Analysis Guide</a></td></tr>
                                    <tr><td><a href="https://fermi.gsfc.nasa.gov/ssc/data/access/">Fermi LAT & GBM Data Access</a></td></tr>
                                    <tr><td><a href="https://fermi.gsfc.nasa.gov/ssc/data/access/lat/FAVA/">Fermi All-Sky Variability Analysis (FAVA)</a></td></tr>           
                              </tbody>
                            </table>  
                        </center>
                </div>
                <!-- Related resources ends here -->   

            <!-- Citation request start here -->    
            <div class="panel panel-default">   
                <div class="panel-heading">
                    Please reference <a href="https://www.astronomerstelegram.org/?read=15110">Kocevski et al. 2021</a> for use of any results presented in the Fermi LAT Light Curve Repository. Also be sure to consult the <a href="about.html">LCR Usage Notes</a> for important details and caveats about the LCR analysis.
                </div>
            </div>
            <!--  Citation request ends here -->    


        </div>
        <!-- sidebar ends here -->

        <!-- Content panel starts here -->
        <div class="col-xs-7" style="width:1330px; margin-left:-15px">
            <div class="panel panel-default">
                <div class="panel-heading"><h3 class="panel-title">About the Light Curve Repository</div>

                    <!-- <div style="width:400px; height:675px; float:right; border:1px solid #ddd; margin:5px 5px 5px 15px; border-radius: 4px;"> -->
                    <div style="width:500px; height:575px; float:right; margin:10px 10px 10px 15px; border:0px">
                        <img src="./img/4FGL_J0237.8+2848.jpg" width="100%">
                        <B>Figure 1:</B> A model map for a single time bin of the region surrounding 4FGL J0237.8+2848, which contains 15 other variable sources within a 12 deg radius, highlighting the need to model all variable sources within the region surrounding the source of interest.
                    </div>

                    <div style="margin:10px">

                        <B>Motivation:</B><BR>

                        The Fermi Large Area Telescope (LAT) Light Curve Repository (LCR) is a database of multi-cadence flux calibrated light curves for over 1500 sources deemed variable in the 10 year Fermi LAT point source (4FGL-DR2) catalog <a href="https://ui.adsabs.harvard.edu/abs/2020arXiv200511208B/abstract">(Ballet et al. 2020)</a>.  The light curves hosted by the LCR cover the entire ongoing Fermi mission duration and include data binned at 3 day, 1 week, and 1 month intervals and are continually updated as new data become available. The high duty cycle and long-term monitoring of the gamma-ray sky has made the LAT an important tool in the study of time-domain astronomy, provided the identification and regular monitoring of thousands of transient and variable sources. The LCR is intended to serve as a resource to the time-domain and multi-messenger communities by allowing users to quickly search the LAT data to identify correlated variability and flaring emission episodes from gamma-ray sources. 

                        <BR><BR>
                        <B>Sample Selection:</B><BR>

                        The LCR provides light curves for all sources in the <a href="https://fermi.gsfc.nasa.gov/ssc/data/access/lat/10yr_catalog">4FGL-DR2</a> catalog that exhibit a variability index greater than 21.67, where the variability index can be thought of as a proxy to the average fractional variability with dF/F measured on timescales of 1 year. As defined in the 4FGL-DR2 catalog, sources with a variability index greater than 21.67 over 12 intervals are estimated to have a < 1% chance of being a steady source. The resulting sample consists of 1525 sources, or roughly 26% of the 4FGL-DR2 catalog. A vast majority of these sources are blazars, further classified as flat spectrum radio quasars, BL Lacs, and blazars candidates of unknown type making up roughly 38%, 31%, and 24% of the repository sample respectively. Generating 3 day, 1 week, and 1 month light curves for each of these sources for over 13 years of data requires the analysis of over 3.7 million individual time bins.


                        <BR><BR>
                        <B>Data Analysis:</B><BR>

                        <em>Analysis Technique: </em>The characterization of LAT sources is typically performed using a maximum likelihood analysis (<a href="http://arxiv.org/abs/0902.1340">Abdo et al. 2009, ApJS, 183, 46</a>), in which a model describing the point sources and diffuse and isotropic gamma-ray emission in a given region of the sky are jointly optimized to best describe the observed photon distribution.  The light curves generated by the LCR are obtained by performing an <a href="https://fermi.gsfc.nasa.gov/ssc/data/analysis/scitools/likelihood_tutorial.html">unbinned likelihood</a> analysis, in which the full spatial and spectral information of each photon is used in the maximum likelihood optimization.  
                        <BR>
                        <BR>
                        <em>Analysis Tools & Data Selection: </em>The LCR analysis is performed with the standard <a href="https://fermi.gsfc.nasa.gov/ssc/data/analysis/software/">Fermi LAT science tools</a> (version v11r5p3) using the <a href="https://fermi.gsfc.nasa.gov/ssc/data/analysis/documentation/Cicerone/Cicerone_LAT_IRFs/IRF_overview.html">P8R2_SOURCE_V6</a> instrument response functions on <a href="https://fermi.gsfc.nasa.gov/ssc/data/analysis/documentation/Cicerone/Cicerone_Data/LAT_DP.html">P8R3_SOURCE</a> class photons selected over an energy range covering 100 MeV - 100 GeV. The photons are selected from a 12° radius energy-independent region of interest (ROI) centered on the location of the source of interest. The size of the ROI is chosen to reflect the 95% containment radius of the <a href="https://fermi.gsfc.nasa.gov/ssc/data/analysis/documentation/Cicerone/Cicerone_LAT_IRFs/IRF_PSF.html">LAT energy-dependent point-spread function (PSF)</a> at 100 MeV. Additional data selection cuts are imposed to exclude photons associated with regions and periods of known solar flare and GRB activity, as well as a <a href="https://fermi.gsfc.nasa.gov/ssc/data/analysis/documentation/Cicerone/Cicerone_Data_Exploration/Data_preparation.html">zenith angle cut</a> of 90° to prevent contamination from gamma-rays from the Earth limb produced through interactions of cosmic rays with Earth’s atmosphere.
                        <BR>
                        <BR>
                        <em>Data Modeling: </em>The resulting distribution of counts for each source of interest is modeled as a point source using an energy-dependent LAT PSF and a photon spectrum drawn from the 4FGL-DR2 catalog.  The normalization of the source spectrum in the model is left free to vary, while the spectral parameters are initially fixed to their 4FGL-DR2 catalog values. The model also includes all gamma-ray sources in the 4FGL-DR2 catalog within a radius of 30° centered on each ROI. The normalization of each variable source in the region is also left free to vary in the model, with spectral parameters fixed to their catalog values. In addition to the point sources, Galactic and isotropic background components are also included in the model. The Galactic component, <a href="https://fermi.gsfc.nasa.gov/ssc/data/analysis/software/aux/4fgl/gll_iem_v07.fits">gll_iem_v07.fits</a>, is a spatial and spectral template that accounts for interstellar diffuse gamma-ray emission from the Milky Way. The isotropic component, <a href="https://fermi.gsfc.nasa.gov/ssc/data/analysis/software/aux/iso_P8R3_SOURCE_V3_v1.txt">iso_P8R3_SOURCE_V3_v1</a>, provides a spectral template to account for all remaining isotropic emission, including contributions from both residual charged-particle backgrounds and the isotropic celestial gamma-ray emission. The normalization of both the Galactic and isotropic components are allowed to vary during the fit. The free parameters of the model are varied to maximize the likelihood of observing the data given the model.  An iterative fitting strategy, which varies the required fit tolerance, is employed to minimize the number of bins in which the likelihood fit does not successfully convergence. Once an adequate fit is achieved, a second round of fitting is performed in which the photon index of the source of interest is allowed to vary.  
                        <BR>
                        <BR>
                        Figure 1 shows a model map for a single time bin of the region surrounding 4FGL J0237.8+2848, which contains 15 other variable sources within a 12 deg radius (roughly corresponding to the <a href="https://www.slac.stanford.edu/exp/glast/groups/canda/lat_Performance.htm">95% LAT PSF</a> at 100 MeV). The source flux for each time bin is fit while simultaneously accounting for the flux variations of all other variable sources within the region of interest.
                        <BR>
                        <BR>
                        <em>Source Detection Criteria: </em>The analysis employs a likelihood ratio test (Neyman & Pearson 1928) to quantify the significance of the source of interest above the expected background.  The analysis utilizes a test statistic (TS) that is twice the ratio of the likelihood evaluated at the best-fit parameters under a background-only, null hypothesis, i.e., a model that does not include a source of interest, to the likelihood evaluated at the best-fit model parameters when including the source at the center of the ROI (Mattox et al. 1996). This ratio is distributed approximately as χ2 (Wilks 1938), and the analysis rejects the null hypothesis when the test statistic is greater than TS>=4, or roughly equivalent to a 2σ rejection criterion for a single degree of freedom. Using this test statistic as the detection criterion, the LCR estimates the observed LAT flux for sources with TS>=4 and uses a <a href="https://fermi.gsfc.nasa.gov/ssc/data/analysis/scitools/upper_limits.html">Bayesian profile likelihood method</a> to calculate upper limits for intervals that yield a TS<4. The resulting best fit flux determination (or upper limit) and spectral shape, for both fixed and free photon index fits, are reported by the LCR. 
                        <BR>
                        <BR>
                        <em>Computational Strategy: </em>For a relatively small number of counts, an <a href="https://fermi.gsfc.nasa.gov/ssc/data/analysis/scitools/likelihood_tutorial.html">unbinned likelihood</a> analysis can be performed rapidly, but as the number of counts increases, the time to perform the analysis can become prohibitive. This limitation becomes increasingly burdensome when the need arises to perform source characterization over a large number of time bins. <a href="https://fermi.gsfc.nasa.gov/ssc/data/analysis/scitools/binned_likelihood_tutorial.html">Binned likelihood</a> analysis can help alleviate some of these issues, but since information is lost when binning data, there exists a trade off between the number of bins to use (e.g. computing time) and the accuracy of the final results. The LCR tackles the computational overhead by parallelizing the process of performing a full unbinned likelihood analysis. In order to produce a high cadence light curve over the entire lifetime of the mission in a reasonable amount of time, the LCR distributes the analysis of each light curve bin to a separate node in a computer cluster hosted at the SLAC National Accelerator Center. The parallelization allows for thousands of time bins to be analyzed simultaneously, with the net effect of drastically reducing the time it takes to generate mission duration light curves. Figure 2 shows the resulting 3-day light curve covering over 11 years of LAT data for the source 4FGL J0237.8+2848.

                        <BR><BR>

                        <!-- <div class="panel panel-default"> -->
<!--                         <div>
                            <center>
                                <img src="./img/4FGL_J0237.8+2848_lc.jpg" width="65%">
                                <BR>
                                <B>Figure 2:</B> An example 3-day light curve covering over 11 years of LAT data for the source 4FGL J0237.8+2848 at the center of Figure 1.
                            </center>
                        </div> -->

                        <div style="width:1250px; height:425px; margin:10px 10px 10px 14px; border:0px">
                          <center>
                                <img src="./img/4FGL_J0237.8+2848_lc.jpg" width="90%">
                                <BR>
                                <B>Figure 2:</B> An example 3-day light curve covering over 11 years of LAT data for the source 4FGL J0237.8+2848 at the center of Figure 1.
                            </center>
                        </div>

                        <BR>
                        <B>Likelihood Analysis Summary:</B><BR>

                        <div style='margin-left:10px; margin-top:10px'>
                            <table class="table table-striped table-bordered" style="width:500px;">
                                <tr>
                                    <td>Time bins</td>
                                    <td>3 day, 1 week, and 1 month</td> 
                                </tr>
                                <tr>
                                    <td>Energy bins</td>
                                    <td>100 MeV - 100 GeV</td> 
                                </tr>
                                <tr>
                                    <td>Event selection</td>
                                    <td>P8R3_SOURCE</td> 
                                </tr>
                                <tr>
                                    <td>Instrument response function</td>
                                    <td>P8R3_SOURCE_V2</td> 
                                </tr>
                                <tr>
                                    <td>Acceptance cone (ROI)</td>
                                    <td>12 deg (radius)</td>
                                </tr>
                                <tr>
                                    <td>Zenith angle cut (zmax)</td>
                                    <td>90 deg</td>
                                </tr>
                                <tr>
                                    <td>Fit optimizer</td>
                                    <td>MINUIT</td>
                                </tr>
                                <tr>
                                    <td><a href="https://fermi.gsfc.nasa.gov/ssc/data/access/lat/BackgroundModels.html">Galactic interstellar emission model<a></td>
                                    <td><a href="https://fermi.gsfc.nasa.gov/ssc/data/analysis/software/aux/4fgl/gll_iem_v07.fits">gll_iem_v07.fits</a></td> 
                                </tr>
                                <tr>
                                    <td><a href="https://fermi.gsfc.nasa.gov/ssc/data/access/lat/BackgroundModels.html">Isotropic spectral template</a></td>
                                    <td><a href="https://fermi.gsfc.nasa.gov/ssc/data/analysis/software/aux/iso_P8R3_SOURCE_V3_v1.txt">iso_P8R3_SOURCE_V3_v1</a></td> 
                                </tr>
                                <tr>
                                    <td><a href="https://fermi.gsfc.nasa.gov/ssc/data/access/lat/10yr_catalog/">4FGL-DR2 catalog</a></td>
                                    <td><a href="https://fermi.gsfc.nasa.gov/ssc/data/access/lat/10yr_catalog/gll_psc_v27.fit">gll_psc_v27.fit</a></td> 
                                </tr>
                                <tr>
                                    <td>Upper limits confidence level</td>
                                    <td>95% (Bayesian profile)</td>
                                </tr>
                                <tr>
                                    <td>Minimum detection threshold</td>
                                    <td>TS = 1-4 (~1-2&sigma;)</td>
                                </tr>
                            </table>
                        </div>

                        <BR>

                        <B>Data Access:</B><BR>

                        There are multiple ways to download the LCR data for offline analysis. The light curve data for individual sources can be downloaded in CSV or JSON formats through their specific Source Report pages, e.g. <a href="https://fermi.gsfc.nasa.gov/ssc/data/access/lat/LightCurveRepository/source.html?source_name=4FGL_J0001.5+2113">4FGL J0001.5+2113</a>. The data can also be obtained through a python API interface called <a href="https://github.com/dankocevski/pyLCR">pyLCR</a>. The python module includes scriptable functions to download the lightcurve data and helper functions to plot and examine the data. Consult the GitHub <a href="https://github.com/dankocevski/pyLCR/blob/main/README.md">README</a> to learn more about how to install and use the API module. 

                        <BR><BR>

                        <B>Usage Notes and Important Caveats:</B><BR>
                        <ul>
                            <li>The LCR provides fit results from both convergent and non-convergent likelihood analyses.  However, it is important that the end user is aware that results from non-convergent analyses should be considered suspect and should not be used for higher level analyses (e.g. multifrequency cross-correlation, PSD, Bayesian blocks studies).  The source specific report pages do not display this data by default, but do include an option to include this data in the light curve results.</li>
                            <li>The LCR provides fit results from likelihood analyses where the photon index of the source is at the minimum or maximum of the allowable parameter range.  These results should be considered as being estimated from unconstrained fits, since the the true minimum of the fit was likely not attained, and should likely not be used for higher level analyses.  As with the non-convergant fits, the source specific report pages do not display data for unconstrained fits by default, but an option to include this data in the light curve results is provided to the user.</li> 
                            <li>The likelihood test statistic (TS) is deﬁned to be positive. However, negative TS values can sometimes be obtained when the parameters reach the limits of their allowed intervals without having maximized the likelihood profile. Fit results obtained from interval that resulted in negative TS values should be considered suspect and not used in higher level analyses.</li>
                            <li>While time intervals containing gamma-ray bursts and solar ﬂare episodes have been removed from the LAT data prior to the likelihood analyses performed to obtain the light curves provided by the LCR; possible contamination by the proximity of the quiescent Sun or Moon has not been accounted for, nor have those time ranges been excluded.</li>
                            <li>Because the LCR analysis are made available in real-time, the results are not validated by the LAT collaboration prior to release. Users are encouraged to perform sanity checks by examining the ﬂux to ﬂux uncertainty ratio versus the square root of the TS, and at the fit result distributions, e.g. ﬂux, ﬂux uncertainties, spectral indices mean values (photon index, alpha, etc) and their uncertainties. Some examples of these are shown in Figure 3. The ﬂux over ﬂux uncertainty ratio is expected to behave approximately linearly to the square root of the TS. Any outlier should be either further investigated or removed before using the data for higher level analysis. Outliers from the data distributions or portions of data distributed diﬀerently should be further investigated or removed before performing higher level analyses.</li>
                        </ul>

                        <B>Known Issues:</B>
                        <ul>
                            <li><em>Erroneously high flux values during periods of low exposure.</em> After the inital release of the LCR data, it was discovered that a relatively small number of sources can experience large over-estimates of their flux values during periods of abnormally low exposure.  These low-exposure periods have occured due to the modified rocking profiles that were implemented to mitigate the effects of the Solar Array Drive Assembly (SADA) anomaly, which occured on March 16 2018.  As a result of the anomoly, the LAT all-sky observing effeciency decreases during periods in which the angle between Fermi's orbital plane and the Sun, i.e. the beta angle, is greater than 24°, resulting in lower than usual exposure for high and low declination sources.  The errounous photon flux estimates that have occured during these low exposure periods are easily identified as significant outliers in the ﬂux over ﬂux uncertainty ratio sanity check described above. By default, these data points are filtered and not displayed in the light curve analysis results, but an option does exists to display this data in the source specific report pages. You can read more about the Fermi SADA anomaly and its effects on science performance <a href="https://fermi.gsfc.nasa.gov/ssc/observations/types/post_anomaly/">here</a>.
                            </li>
                        </ul>

                        <div align="center" style="padding-top:10px; padding-bottom:25px; width:1050px; margin:0 auto;text-align:left;">
                            <img src="./img/4fgl_j1224.9_2122_Validation.png" width="1050px">
                            <img src="./img/4fgl_j0237.8_2848_Validation.png" width="1055px" style="padding-left:15px">
                            <BR>
                            <B>Figure 3:</B> The square of the ratio of the ﬂux over its uncertainty is expected to be proportional to the TS, as the top left panel shows. Outliers, such as the one shown in the bottom left panel, should be further investigated or removed. The bottom distributions of ﬂux and ﬂux uncertainty show some outliers that, in this case, correspond to non-convergent analyses. However, outliers are not necessarily limited to non-convergent cases.                           
                        </div>

                        <B>The Light Curve Repository vs. the Fermi All-Sky Variability Analysis</B><BR>
                        The LCR is based on the successful <a href="https://fermi.gsfc.nasa.gov/ssc/data/access/lat/FAVA/">Fermi All-sky Variability Analysis</a> (FAVA), which has been extremely effective at identifying transient sources in the LAT data. FAVA is a photometric technique that searches for flaring sources by comparing the observed flux from a region of the sky to the expected flux based on the observed long-term average emission collected over the course of the Fermi mission. This analysis has the advantage of being independent of any model for the diffuse gamma-ray emission and does not make any assumptions about the spectral shape of the gamma-ray sources as is required in a traditional likelihood analysis. Although very effective at detecting flaring emission, FAVA is less effective for the long-term characterization of a source, especially for those near other variable sources.  Because of the large PSF of the LAT (as much as a 12° 95% containment radius at 100 MeV when using P8R3_SOURCE_V2) care must be taken in interpreting emission excesses at a particular location in the sky, as emission from a nearby flaring source will be detected over a large region of the sky. The LCR provides light curves generated through a full likelihood analysis that simultaneously models both the source of interest and all sources in the surrounding region, providing calibrated flux and photon index measurements for each time bin that take into account variability from nearby sources.  Therefore, while FAVA is an effective flare detection method, the LCR analysis is intended to be a resource for long baseline source characterization.

                        <!-- <BR><BR> -->
                        <!-- <B>Analysis Caveats:</B><span class="label label-danger" style="margin-left:5px">Important!</span><BR> -->
                        <!-- It is important to remember that FAVA is a photometric technique.  Because of the large PSF of the LAT (as much as 12&deg; 95% containment radius at 100 MeV when using P8R3_SOURCE_V2) care must be taken in interpreting emission excesses at a particular location in the sky, as emission from a flaring source will be detected over a large region of the sky.  Therefore, users of the light curve generator are encouraged to consult the accompanying flare map to check the percise location of the flare associated with any excess emission found near the user's coordiantes of interest.   -->

                        <BR><BR>
                        <B>Credits:</B><BR>
                        The LCR is currently maintained by Daniel Kocevski (NASA MSFC), with additional support from Janeth Valverde (GSFC/CRESST), Simone Garrappa (DESY), Michela Negro (GSFC/CRESST), Jean Ballet (CEA Saclay) and Benoit Lott (CNRS/IN2P3, Université de Bordeaux), on behalf of NASA and the Fermi Large Area Telescope Collaboration.  The website interface was designed by Daniel Kocevski, using <a href="https://github.com/ofrohn">Olaf Frohn's</a> <a href="https://github.com/ofrohn/d3-celestial">D3-Celestial</a> sky map code, the <a href="http://http://www.highcharts.com">Highcharts</a> javascript plotting library, and the <a href="http://getbootstrap.com">Bootstrap</a> toolkit. The development of the LCR has been funded in part through the Fermi Guest Investigator Program (NASA Research Announcements NNH19ZDA001N and NNH20ZDA001N). 


                        <BR><BR>
                        <B>Code Availability:</B><BR>
                        The LCR front- and back-end code is publicly available as a <a href="https://github.com/dankocevski/LightCurveRepository">GitHub repository</a>. User contributions to the GitHub repository are welcomed and encouraged! The LCR likelihood analysis code is available upon request. Please contact <a href="mailto:fermilcr@athena.gsfc.nasa.gov"> fermilcr@athena.gsfc.nasa.gov</a> for more information on obtaining the analysis code.
                        <BR><BR>                        
                        <B>Further Reading:</B><BR>
                        <a href="https://iopscience.iop.org/article/10.3847/1538-4365/ab6bcb">Fermi Large Area Telescope Fourth Source Catalog</a> -  <i>Abdollahi et al. 2020, ApJS, 247, 33A </i><BR>
                        <a href="https://fermi.gsfc.nasa.gov/ssc/data/analysis/documentation/Cicerone/">The Fermi LAT Cicerone</a> - Documentation on the Fermi-LAT science tools and the data analysis techniques.<BR>
                        <a href="https://fermi.gsfc.nasa.gov/ssc/data/analysis/scitools/likelihood_tutorial.html">An Unbinned Likelihood Tutorial</a> - A full tutorial on the use of unbinned likelihood analysis to analyze Fermi LAT data. 
                    </div>                        
                </div>  

            </div>
        </div>
        <!-- Content panel ends here --> 

        <!-- </div> -->

         <!-- footer starts here --> 
        <div class="col-md-12" id="footer">
            <div id="footer-content">
                <p>
                    <hr>
                    Fermi LAT Light Curve Repository - Support Contact:<a href="mailto:fermilcr@athena.gsfc.nasa.gov"> fermilcr@athena.gsfc.nasa.gov</a>
                    <BR>
                    <BR>
                </p>
            </div>
        </div>
        <!-- footer ends here -->
    </div>
    <!-- Main ends here -->


</body>
</html>

